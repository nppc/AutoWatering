C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE INITDEVICE
OBJECT MODULE PLACED IN .\src\InitDevice.OBJ
COMPILER INVOKED BY: c:\SiliconLabs\SimplicityStudio\v5\developer\toolchains\keil_8051\9.60\BIN\C51.exe C:\src\Tennp\Git
                    -\AutoWatering\Firmware\AutoWaterLight\src\InitDevice.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) WARNINGLEVEL(2) FLOATFUZ
                    -ZY(3) OPTIMIZE(8,SPEED) INTVECTOR(0X0000) INTPROMOTE INCDIR(C:/SiliconLabs/SimplicityStudio/v5/developer/sdks/8051/v4.2.
                    -0//Device/shared/si8051Base;C:/SiliconLabs/SimplicityStudio/v5/developer/sdks/8051/v4.2.0//Device/EFM8BB1/inc) PRINT(.\s
                    -rc\InitDevice.lst) COND PAGEWIDTH(120) PAGELENGTH(65) OBJECT(.\src\InitDevice.OBJ)

line level    source

   1          //=========================================================
   2          // src/InitDevice.c: generated by Hardware Configurator
   3          //
   4          // This file will be regenerated when saving a document.
   5          // leave the sections inside the "$[...]" comment tags alone
   6          // or they will be overwritten!
   7          //=========================================================
   8          
   9          // USER INCLUDES
  10          #include <SI_EFM8BB1_Register_Enums.h>
  11          #include "InitDevice.h"
  12          
  13          // USER PROTOTYPES
  14          // USER FUNCTIONS
  15          
  16          // $[Library Includes]
  17          // [Library Includes]$
  18          
  19          //==============================================================================
  20          // enter_DefaultMode_from_RESET
  21          //==============================================================================
  22          extern void
  23          enter_DefaultMode_from_RESET (void)
  24          {
  25   1        // $[Config Calls]
  26   1        WDT_0_enter_DefaultMode_from_RESET ();
  27   1        PORTS_0_enter_DefaultMode_from_RESET ();
  28   1        PORTS_1_enter_DefaultMode_from_RESET ();
  29   1        PBCFG_0_enter_DefaultMode_from_RESET ();
  30   1        ADC_0_enter_DefaultMode_from_RESET ();
  31   1        VREF_0_enter_DefaultMode_from_RESET ();
  32   1        CLOCK_0_enter_DefaultMode_from_RESET ();
  33   1        TIMER16_2_enter_DefaultMode_from_RESET ();
  34   1        TIMER_SETUP_0_enter_DefaultMode_from_RESET ();
  35   1        PCA_0_enter_DefaultMode_from_RESET ();
  36   1        PCACH_0_enter_DefaultMode_from_RESET ();
  37   1        PCACH_1_enter_DefaultMode_from_RESET ();
  38   1        PCACH_2_enter_DefaultMode_from_RESET ();
  39   1        EXTINT_0_enter_DefaultMode_from_RESET ();
  40   1        INTERRUPT_0_enter_DefaultMode_from_RESET ();
  41   1        // [Config Calls]$
  42   1      
  43   1      }
  44          
  45          extern void
  46          WDT_0_enter_DefaultMode_from_RESET (void)
  47          {
  48   1        // $[Watchdog Timer Init Variable Declarations]
  49   1        uint32_t i;
  50   1        bool ea;
  51   1        // [Watchdog Timer Init Variable Declarations]$
  52   1      
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 2   

  53   1        // $[WDTCN - Watchdog Timer Control]
  54   1        // Deprecated
  55   1        // [WDTCN - Watchdog Timer Control]$
  56   1      
  57   1        // $[WDTCN_2 - Watchdog Timer Control]
  58   1      
  59   1        // Feed WDT timer before disabling (Erratum WDT_E102)
  60   1        WDTCN = 0xA5;
  61   1      
  62   1        // Add 2 LFO cycle delay before disabling WDT (Erratum WDT_E102)
  63   1        for (i = 0; i < (2 * 3062500UL) / (10000 * 3); i++)
  64   1          {
  65   2            NOP ();
  66   2          }
  67   1      
  68   1        // Disable WDT
  69   1        ea = IE_EA;
  70   1        IE_EA = 0;
  71   1        WDTCN = 0xDE;
  72   1        WDTCN = 0xAD;
  73   1        IE_EA = ea;
  74   1      
  75   1        // [WDTCN_2 - Watchdog Timer Control]$
  76   1      
  77   1      }
  78          
  79          extern void
  80          PORTS_0_enter_DefaultMode_from_RESET (void)
  81          {
  82   1        // $[P0 - Port 0 Pin Latch]
  83   1        // [P0 - Port 0 Pin Latch]$
  84   1      
  85   1        // $[P0MDOUT - Port 0 Output Mode]
  86   1        /***********************************************************************
  87   1         - P0.0 output is open-drain
  88   1         - P0.1 output is open-drain
  89   1         - P0.2 output is open-drain
  90   1         - P0.3 output is open-drain
  91   1         - P0.4 output is open-drain
  92   1         - P0.5 output is open-drain
  93   1         - P0.6 output is open-drain
  94   1         - P0.7 output is push-pull
  95   1         ***********************************************************************/
  96   1        P0MDOUT = P0MDOUT_B0__OPEN_DRAIN | P0MDOUT_B1__OPEN_DRAIN
  97   1            | P0MDOUT_B2__OPEN_DRAIN | P0MDOUT_B3__OPEN_DRAIN | P0MDOUT_B4__OPEN_DRAIN
  98   1            | P0MDOUT_B5__OPEN_DRAIN | P0MDOUT_B6__OPEN_DRAIN | P0MDOUT_B7__PUSH_PULL;
  99   1        // [P0MDOUT - Port 0 Output Mode]$
 100   1      
 101   1        // $[P0MDIN - Port 0 Input Mode]
 102   1        /***********************************************************************
 103   1         - P0.0 pin is configured for digital mode
 104   1         - P0.1 pin is configured for digital mode
 105   1         - P0.2 pin is configured for digital mode
 106   1         - P0.3 pin is configured for digital mode
 107   1         - P0.4 pin is configured for analog mode
 108   1         - P0.5 pin is configured for analog mode
 109   1         - P0.6 pin is configured for analog mode
 110   1         - P0.7 pin is configured for digital mode
 111   1         ***********************************************************************/
 112   1        P0MDIN = P0MDIN_B0__DIGITAL | P0MDIN_B1__DIGITAL | P0MDIN_B2__DIGITAL
 113   1            | P0MDIN_B3__DIGITAL | P0MDIN_B4__ANALOG | P0MDIN_B5__ANALOG
 114   1            | P0MDIN_B6__ANALOG | P0MDIN_B7__DIGITAL;
 115   1        // [P0MDIN - Port 0 Input Mode]$
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 3   

 116   1      
 117   1        // $[P0SKIP - Port 0 Skip]
 118   1        /***********************************************************************
 119   1         - P0.0 pin is skipped by the crossbar
 120   1         - P0.1 pin is skipped by the crossbar
 121   1         - P0.2 pin is skipped by the crossbar
 122   1         - P0.3 pin is skipped by the crossbar
 123   1         - P0.4 pin is skipped by the crossbar
 124   1         - P0.5 pin is skipped by the crossbar
 125   1         - P0.6 pin is skipped by the crossbar
 126   1         - P0.7 pin is not skipped by the crossbar
 127   1         ***********************************************************************/
 128   1        P0SKIP = P0SKIP_B0__SKIPPED | P0SKIP_B1__SKIPPED | P0SKIP_B2__SKIPPED
 129   1            | P0SKIP_B3__SKIPPED | P0SKIP_B4__SKIPPED | P0SKIP_B5__SKIPPED
 130   1            | P0SKIP_B6__SKIPPED | P0SKIP_B7__NOT_SKIPPED;
 131   1        // [P0SKIP - Port 0 Skip]$
 132   1      
 133   1        // $[P0MASK - Port 0 Mask]
 134   1        // [P0MASK - Port 0 Mask]$
 135   1      
 136   1        // $[P0MAT - Port 0 Match]
 137   1        // [P0MAT - Port 0 Match]$
 138   1      
 139   1      }
 140          
 141          extern void
 142          PBCFG_0_enter_DefaultMode_from_RESET (void)
 143          {
 144   1        // $[XBR2 - Port I/O Crossbar 2]
 145   1        /***********************************************************************
 146   1         - Weak Pullups enabled 
 147   1         - Crossbar enabled
 148   1         ***********************************************************************/
 149   1        XBR2 = XBR2_WEAKPUD__PULL_UPS_ENABLED | XBR2_XBARE__ENABLED;
 150   1        // [XBR2 - Port I/O Crossbar 2]$
 151   1      
 152   1        // $[PRTDRV - Port Drive Strength]
 153   1        // [PRTDRV - Port Drive Strength]$
 154   1      
 155   1        // $[XBR0 - Port I/O Crossbar 0]
 156   1        // [XBR0 - Port I/O Crossbar 0]$
 157   1      
 158   1        // $[XBR1 - Port I/O Crossbar 1]
 159   1        /***********************************************************************
 160   1         - CEX0, CEX1, CEX2 routed to Port pins
 161   1         - ECI unavailable at Port pin
 162   1         - T0 unavailable at Port pin
 163   1         - T1 unavailable at Port pin
 164   1         - T2 unavailable at Port pin
 165   1         ***********************************************************************/
 166   1        XBR1 = XBR1_PCA0ME__CEX0_CEX1_CEX2 | XBR1_ECIE__DISABLED | XBR1_T0E__DISABLED
 167   1            | XBR1_T1E__DISABLED | XBR1_T2E__DISABLED;
 168   1        // [XBR1 - Port I/O Crossbar 1]$
 169   1      
 170   1      }
 171          
 172          extern void
 173          ADC_0_enter_DefaultMode_from_RESET (void)
 174          {
 175   1        // $[ADC0CN1 - ADC0 Control 1]
 176   1        // [ADC0CN1 - ADC0 Control 1]$
 177   1      
 178   1        // $[ADC0MX - ADC0 Multiplexer Selection]
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 4   

 179   1        /***********************************************************************
 180   1         - Select ADC0.11
 181   1         ***********************************************************************/
 182   1        ADC0MX = ADC0MX_ADC0MX__ADC0P11;
 183   1        // [ADC0MX - ADC0 Multiplexer Selection]$
 184   1      
 185   1        // $[ADC0CF - ADC0 Configuration]
 186   1        /***********************************************************************
 187   1         - SAR Clock Divider = 0x03
 188   1         - ADC0 operates in 10-bit or 12-bit mode 
 189   1         - The on-chip PGA gain is 1
 190   1         - Normal Track Mode
 191   1         ***********************************************************************/
 192   1        ADC0CF = (0x03 << ADC0CF_ADSC__SHIFT) | ADC0CF_AD8BE__NORMAL
 193   1            | ADC0CF_ADGN__GAIN_1 | ADC0CF_ADTM__TRACK_NORMAL;
 194   1        // [ADC0CF - ADC0 Configuration]$
 195   1      
 196   1        // $[ADC0AC - ADC0 Accumulator Configuration]
 197   1        /***********************************************************************
 198   1         - Right justified. No shifting applied
 199   1         - Enable 12-bit mode
 200   1         - ADC0H:ADC0L contain the result of the latest conversion when Burst
 201   1         Mode is disabled
 202   1         - Perform and Accumulate 4 conversions 
 203   1         ***********************************************************************/
 204   1        ADC0AC = ADC0AC_ADSJST__RIGHT_NO_SHIFT | ADC0AC_AD12BE__12_BIT_ENABLED
 205   1            | ADC0AC_ADAE__ACC_DISABLED | ADC0AC_ADRPT__ACC_4;
 206   1        // [ADC0AC - ADC0 Accumulator Configuration]$
 207   1      
 208   1        // $[ADC0TK - ADC0 Burst Mode Track Time]
 209   1        /***********************************************************************
 210   1         - The ADC will sample the input once at the beginning of each 12-bit
 211   1         conversion
 212   1         - Burst Mode Tracking Time = 0x1E
 213   1         ***********************************************************************/
 214   1        ADC0TK = ADC0TK_AD12SM__SAMPLE_ONCE | (0x1E << ADC0TK_ADTK__SHIFT);
 215   1        // [ADC0TK - ADC0 Burst Mode Track Time]$
 216   1      
 217   1        // $[ADC0PWR - ADC0 Power Control]
 218   1        // [ADC0PWR - ADC0 Power Control]$
 219   1      
 220   1        // $[ADC0GTH - ADC0 Greater-Than High Byte]
 221   1        // [ADC0GTH - ADC0 Greater-Than High Byte]$
 222   1      
 223   1        // $[ADC0GTL - ADC0 Greater-Than Low Byte]
 224   1        // [ADC0GTL - ADC0 Greater-Than Low Byte]$
 225   1      
 226   1        // $[ADC0LTH - ADC0 Less-Than High Byte]
 227   1        // [ADC0LTH - ADC0 Less-Than High Byte]$
 228   1      
 229   1        // $[ADC0LTL - ADC0 Less-Than Low Byte]
 230   1        // [ADC0LTL - ADC0 Less-Than Low Byte]$
 231   1      
 232   1        // $[ADC0CN0 - ADC0 Control 0]
 233   1        /***********************************************************************
 234   1         - Enable ADC0 
 235   1         - Enable ADC0 burst mode
 236   1         ***********************************************************************/
 237   1        ADC0CN0 |= ADC0CN0_ADEN__ENABLED | ADC0CN0_ADBMEN__BURST_ENABLED;
 238   1        // [ADC0CN0 - ADC0 Control 0]$
 239   1      
 240   1      }
 241          
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 5   

 242          extern void
 243          CLOCK_0_enter_DefaultMode_from_RESET (void)
 244          {
 245   1        // $[CLKSEL - Clock Select]
 246   1        /***********************************************************************
 247   1         - Clock derived from the Internal High-Frequency Oscillator
 248   1         - SYSCLK is equal to selected clock source divided by 1
 249   1         ***********************************************************************/
 250   1        CLKSEL = CLKSEL_CLKSL__HFOSC | CLKSEL_CLKDIV__SYSCLK_DIV_1;
 251   1        // [CLKSEL - Clock Select]$
 252   1      
 253   1      }
 254          
 255          extern void
 256          TIMER16_2_enter_DefaultMode_from_RESET (void)
 257          {
 258   1        // $[Timer Initialization]
 259   1        // Save Timer Configuration
 260   1        uint8_t TMR2CN0_TR2_save;
 261   1        TMR2CN0_TR2_save = TMR2CN0 & TMR2CN0_TR2__BMASK;
 262   1        // Stop Timer
 263   1        TMR2CN0 &= ~(TMR2CN0_TR2__BMASK);
 264   1        // [Timer Initialization]$
 265   1      
 266   1        // $[TMR2CN0 - Timer 2 Control]
 267   1        // [TMR2CN0 - Timer 2 Control]$
 268   1      
 269   1        // $[TMR2H - Timer 2 High Byte]
 270   1        // [TMR2H - Timer 2 High Byte]$
 271   1      
 272   1        // $[TMR2L - Timer 2 Low Byte]
 273   1        // [TMR2L - Timer 2 Low Byte]$
 274   1      
 275   1        // $[TMR2RLH - Timer 2 Reload High Byte]
 276   1        /***********************************************************************
 277   1         - Timer 2 Reload High Byte = 0xF8
 278   1         ***********************************************************************/
 279   1        TMR2RLH = (0xF8 << TMR2RLH_TMR2RLH__SHIFT);
 280   1        // [TMR2RLH - Timer 2 Reload High Byte]$
 281   1      
 282   1        // $[TMR2RLL - Timer 2 Reload Low Byte]
 283   1        /***********************************************************************
 284   1         - Timer 2 Reload Low Byte = 0x06
 285   1         ***********************************************************************/
 286   1        TMR2RLL = (0x06 << TMR2RLL_TMR2RLL__SHIFT);
 287   1        // [TMR2RLL - Timer 2 Reload Low Byte]$
 288   1      
 289   1        // $[TMR2CN0]
 290   1        /***********************************************************************
 291   1         - Start Timer 2 running
 292   1         ***********************************************************************/
 293   1        TMR2CN0 |= TMR2CN0_TR2__RUN;
 294   1        // [TMR2CN0]$
 295   1      
 296   1        // $[Timer Restoration]
 297   1        // Restore Timer Configuration
 298   1        TMR2CN0 |= TMR2CN0_TR2_save;
 299   1        // [Timer Restoration]$
 300   1      
 301   1      }
 302          
 303          extern void
 304          INTERRUPT_0_enter_DefaultMode_from_RESET (void)
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 6   

 305          {
 306   1        // $[EIE1 - Extended Interrupt Enable 1]
 307   1        /***********************************************************************
 308   1         - Disable ADC0 Conversion Complete interrupt
 309   1         - Disable ADC0 Window Comparison interrupt
 310   1         - Disable CP0 interrupts
 311   1         - Disable CP1 interrupts
 312   1         - Disable all Port Match interrupts
 313   1         - Enable interrupt requests generated by PCA0
 314   1         - Disable all SMB0 interrupts
 315   1         - Disable Timer 3 interrupts
 316   1         ***********************************************************************/
 317   1        EIE1 = EIE1_EADC0__DISABLED | EIE1_EWADC0__DISABLED | EIE1_ECP0__DISABLED
 318   1            | EIE1_ECP1__DISABLED | EIE1_EMAT__DISABLED | EIE1_EPCA0__ENABLED
 319   1            | EIE1_ESMB0__DISABLED | EIE1_ET3__DISABLED;
 320   1        // [EIE1 - Extended Interrupt Enable 1]$
 321   1      
 322   1        // $[EIP1 - Extended Interrupt Priority 1]
 323   1        // [EIP1 - Extended Interrupt Priority 1]$
 324   1      
 325   1        // $[IE - Interrupt Enable]
 326   1        /***********************************************************************
 327   1         - Enable each interrupt according to its individual mask setting
 328   1         - Disable external interrupt 0
 329   1         - Enable interrupt requests generated by the INT1 input
 330   1         - Disable all SPI0 interrupts
 331   1         - Enable interrupt requests generated by the TF0 flag
 332   1         - Disable all Timer 1 interrupt
 333   1         - Enable interrupt requests generated by the TF2L or TF2H flags
 334   1         - Disable UART0 interrupt
 335   1         ***********************************************************************/
 336   1        IE = IE_EA__ENABLED | IE_EX0__DISABLED | IE_EX1__ENABLED | IE_ESPI0__DISABLED
 337   1            | IE_ET0__ENABLED | IE_ET1__DISABLED | IE_ET2__ENABLED | IE_ES0__DISABLED;
 338   1        // [IE - Interrupt Enable]$
 339   1      
 340   1        // $[IP - Interrupt Priority]
 341   1        // [IP - Interrupt Priority]$
 342   1      
 343   1      }
 344          
 345          extern void
 346          PORTS_1_enter_DefaultMode_from_RESET (void)
 347          {
 348   1        // $[P1 - Port 1 Pin Latch]
 349   1        /***********************************************************************
 350   1         - P1.0 is high. Set P1.0 to drive or float high
 351   1         - P1.1 is high. Set P1.1 to drive or float high
 352   1         - P1.2 is low. Set P1.2 to drive low
 353   1         - P1.3 is high. Set P1.3 to drive or float high
 354   1         - P1.4 is low. Set P1.4 to drive low
 355   1         - P1.5 is low. Set P1.5 to drive low
 356   1         - P1.6 is high. Set P1.6 to drive or float high
 357   1         ***********************************************************************/
 358   1        P1 = P1_B0__HIGH | P1_B1__HIGH | P1_B2__LOW | P1_B3__HIGH | P1_B4__LOW
 359   1            | P1_B5__LOW | P1_B6__HIGH;
 360   1        // [P1 - Port 1 Pin Latch]$
 361   1      
 362   1        // $[P1MDOUT - Port 1 Output Mode]
 363   1        /***********************************************************************
 364   1         - P1.0 output is push-pull
 365   1         - P1.1 output is push-pull
 366   1         - P1.2 output is push-pull
 367   1         - P1.3 output is open-drain
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 7   

 368   1         - P1.4 output is push-pull
 369   1         - P1.5 output is push-pull
 370   1         - P1.6 output is open-drain
 371   1         ***********************************************************************/
 372   1        P1MDOUT = P1MDOUT_B0__PUSH_PULL | P1MDOUT_B1__PUSH_PULL
 373   1            | P1MDOUT_B2__PUSH_PULL | P1MDOUT_B3__OPEN_DRAIN | P1MDOUT_B4__PUSH_PULL
 374   1            | P1MDOUT_B5__PUSH_PULL | P1MDOUT_B6__OPEN_DRAIN;
 375   1        // [P1MDOUT - Port 1 Output Mode]$
 376   1      
 377   1        // $[P1MDIN - Port 1 Input Mode]
 378   1        /***********************************************************************
 379   1         - P1.0 pin is configured for digital mode
 380   1         - P1.1 pin is configured for digital mode
 381   1         - P1.2 pin is configured for digital mode
 382   1         - P1.3 pin is configured for analog mode
 383   1         - P1.4 pin is configured for digital mode
 384   1         - P1.5 pin is configured for digital mode
 385   1         - P1.6 pin is configured for digital mode
 386   1         ***********************************************************************/
 387   1        P1MDIN = P1MDIN_B0__DIGITAL | P1MDIN_B1__DIGITAL | P1MDIN_B2__DIGITAL
 388   1            | P1MDIN_B3__ANALOG | P1MDIN_B4__DIGITAL | P1MDIN_B5__DIGITAL
 389   1            | P1MDIN_B6__DIGITAL;
 390   1        // [P1MDIN - Port 1 Input Mode]$
 391   1      
 392   1        // $[P1SKIP - Port 1 Skip]
 393   1        /***********************************************************************
 394   1         - P1.0 pin is not skipped by the crossbar
 395   1         - P1.1 pin is not skipped by the crossbar
 396   1         - P1.2 pin is not skipped by the crossbar
 397   1         - P1.3 pin is skipped by the crossbar
 398   1         - P1.4 pin is not skipped by the crossbar
 399   1         - P1.5 pin is not skipped by the crossbar
 400   1         - P1.6 pin is not skipped by the crossbar
 401   1         ***********************************************************************/
 402   1        P1SKIP = P1SKIP_B0__NOT_SKIPPED | P1SKIP_B1__NOT_SKIPPED
 403   1            | P1SKIP_B2__NOT_SKIPPED | P1SKIP_B3__SKIPPED | P1SKIP_B4__NOT_SKIPPED
 404   1            | P1SKIP_B5__NOT_SKIPPED | P1SKIP_B6__NOT_SKIPPED;
 405   1        // [P1SKIP - Port 1 Skip]$
 406   1      
 407   1        // $[P1MASK - Port 1 Mask]
 408   1        // [P1MASK - Port 1 Mask]$
 409   1      
 410   1        // $[P1MAT - Port 1 Match]
 411   1        // [P1MAT - Port 1 Match]$
 412   1      
 413   1      }
 414          
 415          extern void
 416          VREF_0_enter_DefaultMode_from_RESET (void)
 417          {
 418   1        // $[REF0CN - Voltage Reference Control]
 419   1        /***********************************************************************
 420   1         - Enable the Temperature Sensor
 421   1         - The ADC0 ground reference is the GND pin
 422   1         - The internal reference operates at 2.4 V nominal
 423   1         - The ADC0 voltage reference is the internal voltage reference
 424   1         ***********************************************************************/
 425   1        REF0CN = REF0CN_TEMPE__TEMP_ENABLED | REF0CN_GNDSL__GND_PIN
 426   1            | REF0CN_IREFLVL__2P4 | REF0CN_REFSL__INTERNAL_VREF;
 427   1        // [REF0CN - Voltage Reference Control]$
 428   1      
 429   1      }
 430          
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 8   

 431          extern void
 432          TIMER_SETUP_0_enter_DefaultMode_from_RESET (void)
 433          {
 434   1        // $[CKCON0 - Clock Control 0]
 435   1        // [CKCON0 - Clock Control 0]$
 436   1      
 437   1        // $[TMOD - Timer 0/1 Mode]
 438   1        /***********************************************************************
 439   1         - Mode 1, 16-bit Counter/Timer
 440   1         - Mode 0, 13-bit Counter/Timer
 441   1         - Timer Mode
 442   1         - Timer 0 enabled only when TR0 = 1 and INT0 is active as defined by bit
 443   1         IN0PL in register IT01CF
 444   1         - Timer Mode
 445   1         - Timer 1 enabled when TR1 = 1 irrespective of INT1 logic level
 446   1         ***********************************************************************/
 447   1        TMOD = TMOD_T0M__MODE1 | TMOD_T1M__MODE0 | TMOD_CT0__TIMER
 448   1            | TMOD_GATE0__ENABLED | TMOD_CT1__TIMER | TMOD_GATE1__DISABLED;
 449   1        // [TMOD - Timer 0/1 Mode]$
 450   1      
 451   1        // $[TCON - Timer 0/1 Control]
 452   1        /***********************************************************************
 453   1         - INT1 is edge triggered
 454   1         - Start Timer 0 running
 455   1         ***********************************************************************/
 456   1        TCON |= TCON_IT1__EDGE | TCON_TR0__RUN;
 457   1        // [TCON - Timer 0/1 Control]$
 458   1      
 459   1      }
 460          
 461          extern void
 462          EXTINT_0_enter_DefaultMode_from_RESET (void)
 463          {
 464   1        // $[IT01CF - INT0/INT1 Configuration]
 465   1        /***********************************************************************
 466   1         - INT0 input is active high
 467   1         - Select P0.0
 468   1         - INT1 input is active high
 469   1         - Select P0.0
 470   1         ***********************************************************************/
 471   1        IT01CF = IT01CF_IN0PL__ACTIVE_HIGH | IT01CF_IN0SL__P0_0
 472   1            | IT01CF_IN1PL__ACTIVE_HIGH | IT01CF_IN1SL__P0_0;
 473   1        // [IT01CF - INT0/INT1 Configuration]$
 474   1      
 475   1      }
 476          
 477          extern void
 478          LFOSC_0_enter_DefaultMode_from_RESET (void)
 479          {
 480   1        // $[LFO0CN - Low Frequency Oscillator Control]
 481   1        /***********************************************************************
 482   1         - Internal L-F Oscillator Enabled
 483   1         - Divide by 1 selected
 484   1         ***********************************************************************/
 485   1        LFO0CN |= LFO0CN_OSCLEN__ENABLED | LFO0CN_OSCLD__DIVIDE_BY_1;
 486   1        // [LFO0CN - Low Frequency Oscillator Control]$
 487   1      
 488   1        // $[Wait for LFOSC Ready]
 489   1        while ((LFO0CN & LFO0CN_OSCLRDY__BMASK) != LFO0CN_OSCLRDY__SET)
 490   1          ;
 491   1        // [Wait for LFOSC Ready]$
 492   1      
 493   1      }
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 9   

 494          
 495          extern void
 496          PCA_0_enter_DefaultMode_from_RESET (void)
 497          {
 498   1        // $[PCA Off]
 499   1        PCA0CN0_CR = PCA0CN0_CR__STOP;
 500   1        // [PCA Off]$
 501   1      
 502   1        // $[PCA0MD - PCA Mode]
 503   1        /***********************************************************************
 504   1         - PCA continues to function normally while the system controller is in
 505   1         Idle Mode
 506   1         - Disable the CF interrupt
 507   1         - System clock
 508   1         ***********************************************************************/
 509   1        PCA0MD = PCA0MD_CIDL__NORMAL | PCA0MD_ECF__OVF_INT_DISABLED
 510   1            | PCA0MD_CPS__SYSCLK;
 511   1        // [PCA0MD - PCA Mode]$
 512   1      
 513   1        // $[PCA0CENT - PCA Center Alignment Enable]
 514   1        // [PCA0CENT - PCA Center Alignment Enable]$
 515   1      
 516   1        // $[PCA0CLR - PCA Comparator Clear Control]
 517   1        // [PCA0CLR - PCA Comparator Clear Control]$
 518   1      
 519   1        // $[PCA0L - PCA Counter/Timer Low Byte]
 520   1        // [PCA0L - PCA Counter/Timer Low Byte]$
 521   1      
 522   1        // $[PCA0H - PCA Counter/Timer High Byte]
 523   1        // [PCA0H - PCA Counter/Timer High Byte]$
 524   1      
 525   1        // $[PCA0POL - PCA Output Polarity]
 526   1        /***********************************************************************
 527   1         - Invert polarity
 528   1         - Invert polarity
 529   1         - Invert polarity
 530   1         ***********************************************************************/
 531   1        PCA0POL = PCA0POL_CEX0POL__INVERT | PCA0POL_CEX1POL__INVERT
 532   1            | PCA0POL_CEX2POL__INVERT;
 533   1        // [PCA0POL - PCA Output Polarity]$
 534   1      
 535   1        // $[PCA0PWM - PCA PWM Configuration]
 536   1        /***********************************************************************
 537   1         - 10 bits
 538   1         ***********************************************************************/
 539   1        PCA0PWM &= ~PCA0PWM_CLSEL__FMASK;
 540   1        PCA0PWM |= PCA0PWM_CLSEL__10_BITS;
 541   1        // [PCA0PWM - PCA PWM Configuration]$
 542   1      
 543   1        // $[PCA On]
 544   1        PCA0CN0_CR = PCA0CN0_CR__RUN;
 545   1        // [PCA On]$
 546   1      
 547   1      }
 548          
 549          extern void
 550          PCACH_0_enter_DefaultMode_from_RESET (void)
 551          {
 552   1        // $[PCA0 Settings Save]
 553   1        // Select Capture/Compare register)
 554   1        PCA0PWM &= ~PCA0PWM_ARSEL__BMASK;
 555   1        // [PCA0 Settings Save]$
 556   1      
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 10  

 557   1        // $[PCA0CPM0 - PCA Channel 0 Capture/Compare Mode]
 558   1        /***********************************************************************
 559   1         - Disable negative edge capture
 560   1         - Disable CCF0 interrupts
 561   1         - Disable match function
 562   1         - 8 to 11-bit PWM selected
 563   1         - Disable positive edge capture
 564   1         - Disable comparator function
 565   1         - Enable PWM function
 566   1         - Disable toggle function
 567   1         ***********************************************************************/
 568   1        PCA0CPM0 = PCA0CPM0_CAPN__DISABLED | PCA0CPM0_ECCF__DISABLED
 569   1            | PCA0CPM0_MAT__DISABLED | PCA0CPM0_PWM16__8_BIT | PCA0CPM0_CAPP__DISABLED
 570   1            | PCA0CPM0_ECOM__DISABLED | PCA0CPM0_PWM__ENABLED
 571   1            | PCA0CPM0_TOG__DISABLED;
 572   1        // [PCA0CPM0 - PCA Channel 0 Capture/Compare Mode]$
 573   1      
 574   1        // $[PCA0CPL0 - PCA Channel 0 Capture Module Low Byte]
 575   1        // [PCA0CPL0 - PCA Channel 0 Capture Module Low Byte]$
 576   1      
 577   1        // $[PCA0CPH0 - PCA Channel 0 Capture Module High Byte]
 578   1        PCA0CPH0 = 0x00;
 579   1        // [PCA0CPH0 - PCA Channel 0 Capture Module High Byte]$
 580   1      
 581   1        // $[Auto-reload]
 582   1        PCA0PWM |= PCA0PWM_ARSEL__AUTORELOAD;
 583   1      
 584   1        PCA0PWM &= ~PCA0PWM_ARSEL__BMASK;
 585   1        // [Auto-reload]$
 586   1      
 587   1        // $[PCA0 Settings Restore]
 588   1        // [PCA0 Settings Restore]$
 589   1      
 590   1      }
 591          
 592          extern void
 593          PCACH_1_enter_DefaultMode_from_RESET (void)
 594          {
 595   1        // $[PCA0 Settings Save]
 596   1        // Select Capture/Compare register)
 597   1        PCA0PWM &= ~PCA0PWM_ARSEL__BMASK;
 598   1        // [PCA0 Settings Save]$
 599   1      
 600   1        // $[PCA0CPM1 - PCA Channel 1 Capture/Compare Mode]
 601   1        /***********************************************************************
 602   1         - Disable negative edge capture
 603   1         - Disable CCF1 interrupts
 604   1         - Disable match function
 605   1         - 8 to 11-bit PWM selected
 606   1         - Disable positive edge capture
 607   1         - Enable comparator function
 608   1         - Enable PWM function
 609   1         - Disable toggle function
 610   1         ***********************************************************************/
 611   1        PCA0CPM1 = PCA0CPM1_CAPN__DISABLED | PCA0CPM1_ECCF__DISABLED
 612   1            | PCA0CPM1_MAT__DISABLED | PCA0CPM1_PWM16__8_BIT | PCA0CPM1_CAPP__DISABLED
 613   1            | PCA0CPM1_ECOM__ENABLED | PCA0CPM1_PWM__ENABLED | PCA0CPM1_TOG__DISABLED;
 614   1        // [PCA0CPM1 - PCA Channel 1 Capture/Compare Mode]$
 615   1      
 616   1        // $[PCA0CPL1 - PCA Channel 1 Capture Module Low Byte]
 617   1        // [PCA0CPL1 - PCA Channel 1 Capture Module Low Byte]$
 618   1      
 619   1        // $[PCA0CPH1 - PCA Channel 1 Capture Module High Byte]
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 11  

 620   1        PCA0CPH1 = 0x00;
 621   1        // [PCA0CPH1 - PCA Channel 1 Capture Module High Byte]$
 622   1      
 623   1        // $[Auto-reload]
 624   1        PCA0PWM |= PCA0PWM_ARSEL__AUTORELOAD;
 625   1      
 626   1        PCA0PWM &= ~PCA0PWM_ARSEL__BMASK;
 627   1        // [Auto-reload]$
 628   1      
 629   1        // $[PCA0 Settings Restore]
 630   1        // [PCA0 Settings Restore]$
 631   1      
 632   1      }
 633          
 634          extern void
 635          PCACH_2_enter_DefaultMode_from_RESET (void)
 636          {
 637   1        // $[PCA0 Settings Save]
 638   1        // Select Capture/Compare register)
 639   1        PCA0PWM &= ~PCA0PWM_ARSEL__BMASK;
 640   1        // [PCA0 Settings Save]$
 641   1      
 642   1        // $[PCA0CPM2 - PCA Channel 2 Capture/Compare Mode]
 643   1        /***********************************************************************
 644   1         - Disable negative edge capture
 645   1         - Disable CCF2 interrupts
 646   1         - Disable match function
 647   1         - 8 to 11-bit PWM selected
 648   1         - Disable positive edge capture
 649   1         - Enable comparator function
 650   1         - Enable PWM function
 651   1         - Disable toggle function
 652   1         ***********************************************************************/
 653   1        PCA0CPM2 = PCA0CPM2_CAPN__DISABLED | PCA0CPM2_ECCF__DISABLED
 654   1            | PCA0CPM2_MAT__DISABLED | PCA0CPM2_PWM16__8_BIT | PCA0CPM2_CAPP__DISABLED
 655   1            | PCA0CPM2_ECOM__ENABLED | PCA0CPM2_PWM__ENABLED | PCA0CPM2_TOG__DISABLED;
 656   1        // [PCA0CPM2 - PCA Channel 2 Capture/Compare Mode]$
 657   1      
 658   1        // $[PCA0CPL2 - PCA Channel 2 Capture Module Low Byte]
 659   1        // [PCA0CPL2 - PCA Channel 2 Capture Module Low Byte]$
 660   1      
 661   1        // $[PCA0CPH2 - PCA Channel 2 Capture Module High Byte]
 662   1        PCA0CPH2 = 0x00;
 663   1        // [PCA0CPH2 - PCA Channel 2 Capture Module High Byte]$
 664   1      
 665   1        // $[Auto-reload]
 666   1        PCA0PWM |= PCA0PWM_ARSEL__AUTORELOAD;
 667   1      
 668   1        PCA0PWM &= ~PCA0PWM_ARSEL__BMASK;
 669   1        // [Auto-reload]$
 670   1      
 671   1        // $[PCA0 Settings Restore]
 672   1        // [PCA0 Settings Restore]$
 673   1      
 674   1      }
 675          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    286    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.60.0.0   INITDEVICE                                                        08/28/2021 20:14:47 PAGE 12  

   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
